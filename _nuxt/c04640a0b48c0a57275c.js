(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{508:function(t,e,n){"use strict";n.r(e);var o={name:"Login",props:{title:{type:String,default:"Login with Traildock"}},data:function(){return{email:"",password:""}},computed:{loginWait:function(){return this.$store.state.user.loginWait},loginError:function(){return this.$store.state.user.loginError},authenticated:function(){return this.$store.getters["user/authenticated"]},registerUrl:function(){return this.$app_config.organization_id?"/organization/"+this.$app_config.organization_id+"/register":"/register"}},methods:{login:function(){var t=this,e={email:this.email,password:this.password};this.$route.params.orgId&&(e.organization_id=this.$route.params.orgId),this.$store.dispatch("user/goLogin",e).then(function(){t.email="",t.password="";var e=localStorage.getItem("login_redirect");e?(localStorage.removeItem("login_redirect"),t.$router.push({path:e})):t.$router.push({path:"/me"})})}}},r=n(20),l={name:"LoginPage",middleware:"unauthenticated",components:{login:Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"hero is-primary"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("h1",{staticClass:"title"},[t._v("\n          "+t._s(t.title)+"\n        ")])])])]),t._v(" "),n("section",{staticClass:"section"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.authenticated,expression:"!authenticated"}],staticClass:"container"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Email")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("Password")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loginError,expression:"loginError"}],staticClass:"notification is-danger"},[t._v("\n        "+t._s(t.loginError)+"\n      ")]),t._v(" "),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",attrs:{disabled:!t.email||!t.password},on:{click:t.login}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loginWait,expression:"!loginWait"}],staticClass:"icon"},[n("i",{staticClass:"far fa-sign-in"})]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.loginWait,expression:"loginWait"}],staticClass:"icon"},[n("i",{staticClass:"fas fa-spinner-third fa-spin"})]),t._v(" "),n("span",[t._v("Login with Traildock")])])]),t._v(" "),n("div",{staticClass:"control"},[n("nuxt-link",{staticClass:"button is-text",attrs:{to:t.registerUrl}},[t._v("\n            Need to register?\n          ")])],1),t._v(" "),n("div",{staticClass:"control"},[n("nuxt-link",{staticClass:"button is-text",attrs:{to:"/login/reset"}},[t._v("\n            Forgot password?\n          ")])],1),t._v(" "),n("div",{staticClass:"control"},[n("nuxt-link",{staticClass:"button is-text",attrs:{to:"/login/email_lookup"}},[t._v("\n            Forgot email?\n          ")])],1)])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.authenticated,expression:"authenticated"}],staticClass:"container"},[n("div",{staticClass:"notification is-warning"},[n("button",{staticClass:"delete",on:{click:function(e){return t.$router.push({path:"/me"})}}}),t._v("\n        You are already logged in!\n      ")])])])])},[],!1,null,"b455ee7e",null).exports}},c=Object(r.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("login",{attrs:{title:"Login"}})],1)},[],!1,null,null,null);e.default=c.exports}}]);